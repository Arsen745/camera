<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream Page</title>
</head>
<body>
    <h1>Стрим</h1>
    <video id="stream" width="640" height="480" autoplay></video>

    <script>
        const video = document.getElementById('stream');
        const peerConnection = new RTCPeerConnection();

        // Здесь вам нужно будет получить ICE candidates и сигналы от camera.html
        // Например, с помощью WebSocket или другого метода
        // Для примера, просто имитируем получение offer

        // Вставьте здесь свой собственный способ получения offer
        const receivedOffer = /* полученный offer от camera.html */;

        peerConnection.setRemoteDescription(new RTCSessionDescription(receivedOffer))
            .then(() => {
                // Создаем ответ
                return peerConnection.createAnswer();
            })
            .then(answer => {
                return peerConnection.setLocalDescription(answer);
            })
            .then(() => {
                console.log("Answer sent: ", peerConnection.localDescription);
                // Отправьте ответ обратно на camera.html
            })
            .catch(err => {
                console.error(err);
            });

        // Получение медиа потока
        peerConnection.ontrack = (event) => {
            video.srcObject = event.streams[0];
        };
    </script>
</body>
</html>
